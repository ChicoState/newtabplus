(()=>{"use strict";var e,t,i,n,s={931:function(e,t,i){var n,s=i(848),l=i(540),a=i(338);let r=(0,l.createContext)({isDragging:!1,activeItem:null,dragStart:{x:0,y:0}});function o(e){let{enabled:t=!0,onDrag:i=()=>{},onDragRelative:n=()=>{},children:a}=e,o=(0,l.useContext)(r),c=(0,l.useRef)(null),[d,u]=(0,l.useState)({x:0,y:0});function h(e){o.isDragging&&o.activeItem===c.current&&(e.preventDefault(),o.isDragging=!1,o.activeItem=null,i(d.x,d.y,!1),n(0,0,!1))}function m(e){o.isDragging&&o.activeItem===c.current&&(e.preventDefault(),u({x:d.x+e.movementX,y:d.y+e.movementY}),i(d.x,d.y,!0),n(d.x-o.dragStart.x,d.y-o.dragStart.y,!0))}return(0,l.useEffect)(()=>(document.addEventListener("mousemove",m),document.addEventListener("mouseleave",h),document.addEventListener("mouseup",h),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseleave",h),document.removeEventListener("mouseup",h)})),(0,s.jsx)("div",{ref:c,style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:t?"grab":"auto"},onMouseDown:function(e){if(!t||o.isDragging)return;e.preventDefault(),o.isDragging=!0,o.activeItem=c.current;let s=c.current.getBoundingClientRect();o.dragStart={x:s.left,y:s.top},u({x:s.left,y:s.top}),i(s.left,s.top,!0),n(0,0,!0)},children:a})}let c="resize-sP66u6",d=(0,l.createContext)(null);function u(e){let{id:t,initialSize:i,initialPosition:n,resizeable:a,children:r}=e,u=(0,l.useRef)(null),h=(0,l.useContext)(d),{widgets:m,removeWidget:g,editing:p,deleting:x}=(0,l.useContext)(Q),j=m.find(e=>e.id===t),[f,v]=(0,l.useState)(n),[b,w]=(0,l.useState)(i),[y,N]=(0,l.useState)(!1),[S,k]=(0,l.useState)(!1),[z,C]=(0,l.useState)(f),[D,E]=(0,l.useState)(b),[M,I]=(0,l.useState)(!0);function T(e,t){return e-=h.grid.offsetLeft,t-=h.grid.offsetTop,[Math.round(e/h.cellSize),Math.round(t/h.cellSize)]}function O(e,t,i){if(x)return;let[n,s]=T(e,t);v({gridX:n=Math.min(h.width-b.width,Math.max(0,n)),gridY:s=Math.min(h.height-b.height,Math.max(0,s))}),N(i),M?C(f):!i&&y&&v(z)}return(0,l.useEffect)(()=>{w(i),v(n)},[i,n]),(0,l.useEffect)(()=>{let e;return h.items.set(u.current,j),e=!0,h.items.forEach((t,i)=>{i===u.current||f.gridX<t.position.gridX+t.size.width&&f.gridX+b.width>t.position.gridX&&f.gridY<t.position.gridY+t.size.height&&f.gridY+b.height>t.position.gridY&&(e=!1)}),I(e),j.size=b,j.position=f,()=>{h.items.delete(u.current)}},[b,f,u.current]),(0,s.jsxs)("div",{id:t,className:["grid-item-DIqRLu",y?"dragging-pAnUxK":"",S?"resizing-YNQQun":"",p?"editing-EGJfH6":"",x?"deleting-qVtTjn":"",!M?"invalid-sP3Ohl":""].join(" "),style:{left:f.gridX*h.cellSize,top:f.gridY*h.cellSize,width:b.width*h.cellSize,height:b.height*h.cellSize},ref:u,onClick:()=>{p&&x&&g(t)},children:[(0,s.jsx)(o,{enabled:p,onDrag:O,children:r}),p&&!x&&a.x&&(0,s.jsx)("div",{className:[c,"resize-left-JXZHng"].join(" "),children:(0,s.jsx)(o,{onDrag:function(e,t,i){O(e-=h.cellSize/2,f.gridY*h.cellSize+h.grid.offsetTop,i)}})}),p&&!x&&a.x&&(0,s.jsx)("div",{className:[c,"resize-right-fblfQq"].join(" "),children:(0,s.jsx)(o,{onDrag:function(e,t,i){let[n,s]=T(e+=h.cellSize/2,t);k(i),w({width:Math.min(h.width-f.gridX,Math.max(1,n-f.gridX)),height:b.height}),M?E(b):!i&&S&&w(D)}})}),p&&!x&&a.y&&(0,s.jsx)("div",{className:[c,"resize-up-OHWr9N"].join(" "),children:(0,s.jsx)(o,{onDrag:function(e,t,i){t-=h.cellSize/2,O(f.gridX*h.cellSize,t,i)}})}),p&&!x&&a.y&&(0,s.jsx)("div",{className:[c,"resize-down-otUzu1"].join(" "),children:(0,s.jsx)(o,{onDrag:function(e,t,i){let[n,s]=T(e,t+=h.cellSize/2);k(i),w({width:b.width,height:Math.min(h.height-f.gridY,Math.max(1,s-f.gridY))}),M?E(b):!i&&S&&w(D)}})})]})}function h(e){let{index:t}=e;return(0,s.jsx)("div",{className:"grid-slot-YT0mqh",children:(0,s.jsx)("div",{className:"grid-slot-inner-v5Yha6",style:{animationDelay:10*t+"ms"}})})}function m(e){let{width:t=16,height:i=8,children:n,ref:a}=e,[r,o]=(0,l.useState)(0),{editing:c,deleting:u,hidden:m}=(0,l.useContext)(Q);(0,l.useEffect)(()=>{if(a.current)return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)};function e(){o(a.current.offsetWidth/t)}},[t,i]);let g=(0,l.useMemo)(()=>{let e=[];for(let n=0;n<i;n++)for(let i=0;i<t;i++)e.push((0,s.jsx)(h,{index:i+n},i+n*t));return e},[t,i]);return(0,s.jsxs)("div",{className:["grid-WM8EIZ",m?"hidden-YtcBLv":""].join(" "),ref:a,children:[c&&(0,s.jsx)("div",{className:"grid-slots-ipk_6U",style:{gridTemplateColumns:`repeat(${t}, 1fr)`,gridTemplateRows:`repeat(${i}, 1fr)`},children:g}),(0,s.jsx)("div",{className:"grid-items-qDMX9i",children:(0,s.jsx)(d.Provider,{value:{grid:a.current,width:t,height:i,cellSize:r,items:new Map},children:n})})]})}let g=(0,l.createContext)(null);function p(e){let{id:t,size:i={width:6,height:4},position:n={gridX:0,gridY:0},resizeable:l={x:!0,y:!0},children:a}=e;return i.width=Math.max(1,i.width),i.height=Math.max(1,i.height),(0,s.jsx)(g.Provider,{value:{size:i},children:(0,s.jsx)("div",{className:"widget-dm82oq",children:(0,s.jsx)(u,{id:t,resizeable:l,initialSize:i,initialPosition:n,children:a})})})}let x={row:"row-klab4p",value:"value-wd_hjG",icon:"icon-kjEis8",body:"body-CYD7JF",cap:"cap-YDSfz2",level:"level-JDlVSa",ok:"ok-_boTsQ",low:"low-QIQMwq",neutral:"neutral-T621kA"},j="container-RGIkaK",f="button-dgISIK";var v=i(108),b=i(607),w=i(179),y=i(123);let N="icon-h39TMg";var S=i(690),k=i(133),z=i(274),C=i(649),D=i(668);let E="day-ZiencA",M={battery:{component:function(){let[e,t]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e;return(async()=>{let i=navigator;if(!i.getBattery)return;let n=await i.getBattery(),s=()=>{t(Math.round(100*("number"==typeof n.level?n.level:0)))};s(),n.addEventListener("levelchange",s),e=()=>{n.removeEventListener("levelchange",s)}})(),()=>null==e?void 0:e()},[]);let i=Math.round((null==e?0:Math.max(0,Math.min(100,e)))/100*40);return(0,s.jsxs)("div",{className:`${x.row} ${x[null==e?"neutral":e<=20?"low":"ok"]}`,children:[(0,s.jsx)("span",{className:x.value,children:null!=e?`${e}%`:"â€”%"}),(0,s.jsxs)("svg",{className:x.icon,viewBox:"0 0 52 24","aria-hidden":"true",children:[(0,s.jsx)("rect",{x:"1",y:"3",width:"44",height:"18",rx:"5",className:x.body}),(0,s.jsx)("rect",{x:"46",y:"8",width:"5",height:"8",rx:"2",className:x.cap}),(0,s.jsx)("rect",{x:"3",y:"5",width:i,height:"14",rx:"4",className:x.level})]})]})},size:{width:2,height:1}},clock:{component:function(e){let{settings:t}=e,[i,n]=(0,l.useState)(new Date);return(0,l.useEffect)(()=>{let e=setInterval(()=>{n(new Date)},1e3);return()=>{clearInterval(e)}},[]),(0,s.jsxs)("div",{className:"body-ImaAM0",children:[(0,s.jsx)("span",{className:"clock-bSifJc",children:(t.use24HourClock?i.getHours():i.getHours()%12||12)+":"+i.getMinutes().toString().padStart(2,"0")}),t.showDate&&(0,s.jsx)("span",{className:"date-hVjd2f",children:i.toLocaleDateString(void 0,{weekday:"long",year:t.showYear?"numeric":void 0,month:"long",day:"numeric"})})]})},size:{width:4,height:2},settings:{use24HourClock:!1,showDate:!0,showYear:!0}},notepad:{component:function(){let[e,t]=(0,l.useState)([{id:"1",title:"Note 1",content:"",pinned:!1}]),[i,n]=(0,l.useState)("1"),[a,r]=(0,l.useState)(null),[o,c]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=localStorage.getItem("multi-notes");if(e){let i=JSON.parse(e);t(i),i.length>0&&n(i[0].id)}else d(!0)},[]),(0,l.useEffect)(()=>{localStorage.setItem("multi-notes",JSON.stringify(e))},[e]);let d=function(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=Date.now().toString(),l=i||0===e.length?1:e.length+1,a={id:s,title:`Note ${l}`,content:"",pinned:!1};t(e=>[...e,a]),n(s)},u=()=>{var e;a&&(e=o.trim()||"Untitled",t(t=>t.map(t=>t.id===a?{...t,title:e}:t))),r(null),c("")},h=e.find(e=>e.id===i);return(0,s.jsxs)("div",{className:[j,"body-SIlAmQ"].join(" "),children:[(0,s.jsxs)("div",{className:"tabs-i4G1rw",children:[e.map(l=>(0,s.jsxs)("div",{className:`tab-_n6B15 ${l.id===i?"activeTab-k3RBDo":""}`,onClick:()=>n(l.id),children:[a===l.id?(0,s.jsx)("input",{className:"renameInput-UfqdNR",value:o,autoFocus:!0,onChange:e=>c(e.target.value),onBlur:u,onKeyDown:e=>"Enter"===e.key&&u()}):(0,s.jsx)("span",{onDoubleClick:()=>{var e,t;return e=l.id,t=l.title,void(r(e),c(t))},title:"Double-click to rename",children:l.title}),(0,s.jsx)("button",{className:"closeBtn-xAAeI0",onClick:i=>{var s;let a;i.stopPropagation(),s=l.id,t(a=e.filter(e=>e.id!==s)),a.length>0?n(a[0].id):d(!0)},children:"\xd7"})]},l.id)),(0,s.jsx)("button",{className:"addBtn-ica193",onClick:()=>d(),children:"+"})]}),h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h3",{className:"title-dpmjQK",children:[h.title,(0,s.jsx)("button",{className:"pinBtn-Gt2fze",onClick:e=>{var i;e.stopPropagation(),i=h.id,t(e=>e.map(e=>e.id===i?{...e,pinned:!e.pinned}:e).sort((e,t)=>!!t.pinned-!!e.pinned))},title:h.pinned?"Unpin note":"Pin note",children:(0,s.jsx)(v.t,{size:16,weight:h.pinned?"fill":"regular",color:h.pinned?"#ffd700":"#fff9"})})]}),(0,s.jsx)("textarea",{className:[j,"textarea-kveST1"].join(" "),value:h.content,onChange:e=>{var i,n;return i=h.id,n=e.target.value,void t(e=>e.map(e=>e.id===i?{...e,content:n}:e))},placeholder:"Type your notes here..."})]})]})},size:{width:4,height:4}},search:{component:function(e){let{settings:t}=e;return(0,s.jsx)("form",{method:"get",action:"https://www.google.com/search",className:"body-RUbHHD",children:(0,s.jsxs)("div",{className:[j,"bar-gYdz0A"].join(" "),children:[t.showIcon&&(0,s.jsx)(b.$,{size:18,color:"#fff4",weight:"bold"}),(0,s.jsx)("input",{className:"search-input-U2kfmT",type:"text",name:"q",placeholder:"Search for something"}),t.showButton&&(0,s.jsx)("button",{className:[j,"search-button-Wi8SrY"].join(" "),type:"submit",children:(0,s.jsx)(w.f,{size:18,color:"#fff8",weight:"bold"})})]})})},resizable:{x:!0,y:!1},size:{width:8,height:1},settings:{showIcon:!0,showButton:!0}},shortcut:{component:function(e){let{settings:t}=e,[i,n]=(0,l.useState)(!1);return(0,s.jsxs)("a",{className:[j,"shortcut-RMqJf8"].join(" "),href:t.website,title:t.website,target:t.openInNewTab?"_blank":"_self",children:[!i&&(0,s.jsx)(y.q,{className:N,weight:"bold"}),(0,s.jsx)("img",{className:N,src:t.website+"/favicon.ico",style:{display:i?"initial":"none"},onLoad:()=>{n(!0)}})]})},resizable:{x:!1,y:!1},size:{width:1,height:1},settings:{website:"",openInNewTab:!1}},todo:{component:function(){let[e,t]=(0,l.useState)([]),[i,n]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=localStorage.getItem("todo-tasks");e&&t(JSON.parse(e))},[]),(0,l.useEffect)(()=>{localStorage.setItem("todo-tasks",JSON.stringify(e))},[e]);let a=()=>{i.trim()&&(t([...e,{text:i.trim(),completed:!1}]),n(""))};return(0,s.jsxs)("div",{className:[j,"body-ksV6Qt"].join(" "),children:[(0,s.jsx)("h3",{className:"title-O4Zs1V",children:"My To-Do List"}),(0,s.jsx)("ul",{className:"todo-list-A4GCM4",children:e.map((i,n)=>(0,s.jsxs)("li",{className:i.completed?"completed-mr_2Mz":"",onClick:()=>{let i;(i=[...e])[n].completed=!i[n].completed,t(i)},children:[(0,s.jsx)("span",{children:i.text}),(0,s.jsx)("button",{className:"delete-task-BHrhdy",onClick:i=>{let s;i.stopPropagation(),(s=[...e]).splice(n,1),t(s)},children:(0,s.jsx)(S.u,{weight:"bold"})})]},n))}),(0,s.jsxs)("div",{className:"todo-input-container-S_ME10",children:[(0,s.jsx)("input",{className:j,value:i,onChange:e=>n(e.target.value),placeholder:"Add a new task...",onKeyDown:e=>"Enter"===e.key&&a()}),(0,s.jsx)("button",{onClick:a,children:"Add"})]})]})},size:{width:4,height:4}},weather:{component:function(){let[e,t]=(0,l.useState)(null);return(0,l.useEffect)(()=>{navigator.geolocation.getCurrentPosition(async e=>{let i=(await (0,k.fetchWeatherApi)("https://api.open-meteo.com/v1/forecast",{latitude:e.coords.latitude,longitude:e.coords.longitude,temperature_unit:"fahrenheit",daily:["temperature_2m_min","temperature_2m_max","cloud_cover_mean"],timezone:"auto"}))[0].daily(),n=i.variables(0).valuesArray(),s=i.variables(1).valuesArray(),l=i.variables(2).valuesArray(),a=[];for(let e=0;e<s.length;e++)a.push({minTemp:n[e],maxTemp:s[e],cloudCover:l[e]});t(a)})},[]),(0,s.jsxs)("div",{className:"body-rgDqoz",children:[!e&&(0,s.jsx)("span",{style:{position:"absolute"},children:"Loading..."}),(0,s.jsxs)("div",{className:"forecast-gOK2pl",children:[!e&&Array.from(Array(7)).map((e,t)=>(0,s.jsx)("div",{className:E},t)),e&&e.map((e,t)=>{var i,n;return(0,s.jsxs)("div",{className:[j,E].join(" "),children:[(i=e.cloudCover,n={size:16,weight:"fill",color:"#fff8"},i<=25?(0,s.jsx)(z.g,{...n}):i<=62.5?(0,s.jsx)(C.X,{...n}):(0,s.jsx)(D.h,{...n})),(0,s.jsxs)("div",{className:"temp-gdI8FD",children:[(0,s.jsx)("span",{className:"temp-min-ryCgDs",children:Math.round(e.minTemp)}),(0,s.jsx)("span",{className:"temp-max-G4EVnN",children:Math.round(e.maxTemp)})]})]},t)})]})]})},size:{width:6,height:1}}};var I=i(744),T=i(811),O=i(622),A=i(375),Y=i(504),L=i(620),X=i(515);function P(){let{editing:e,deleting:t,hidden:i,setEditing:n,setDeleting:a,setHidden:r,menuOpen:o,setMenuOpen:c,saveTemplate:d,loadTemplate:u,templates:h}=(0,l.useContext)(Q);return(0,s.jsx)("div",{className:"header-kzz4la",children:(0,s.jsxs)("div",{className:"row-jbXmzI",children:[!e&&(0,s.jsxs)("button",{className:[j,f].join(" "),onClick:()=>{r(!1),n(!0)},children:[(0,s.jsx)(I.Z,{weight:"bold"}),"Edit"]}),e&&(0,s.jsxs)("button",{className:[j,f].join(" "),onClick:()=>{a(!t)},children:[t?(0,s.jsx)(T.G,{weight:"bold"}):(0,s.jsx)(O.A,{weight:"bold"}),t?"Move":"Delete"]}),e&&(0,s.jsxs)("button",{className:[j,f].join(" "),onClick:()=>{u(),n(!1),a(!1)},children:[(0,s.jsx)(S.u,{weight:"bold"}),"Cancel"]}),e&&(0,s.jsxs)("button",{className:[j,f].join(" "),onClick:()=>{d(),n(!1),a(!1)},children:[(0,s.jsx)(A.S,{weight:"bold"}),"Done"]}),(0,s.jsxs)("button",{className:[j,f].join(" "),onClick:()=>{c(!o)},children:[(0,s.jsx)(Y.k,{weight:"bold"}),"Settings"]}),(0,s.jsx)("button",{className:[j,f].join(" "),style:{padding:"6px"},onClick:()=>{r(!i)},children:i?(0,s.jsx)(L.V,{weight:"bold"}):(0,s.jsx)(X.b,{weight:"bold"})})]})})}let _="active-QmuH5e",J="item-name-VdVj5x";function B(e){let{name:t,initialValue:i,onChange:n}=e,[a,r]=(0,l.useState)(i);return(0,l.useEffect)(()=>{n(a)},[a]),(0,s.jsxs)("div",{className:[j,"menu-item-wJruxh"].join(" "),children:[(0,s.jsx)("span",{className:J,children:t}),(0,s.jsxs)("div",{className:"item-input-IXdD2y",children:["boolean"==typeof a&&(0,s.jsx)("input",{type:"checkbox",checked:a,onChange:e=>{r(e.target.checked)}}),"string"==typeof a&&(0,s.jsx)("input",{type:a.startsWith("#")?"color":"text",value:a,onChange:e=>{r(e.target.value)}}),"number"==typeof a&&(0,s.jsx)("input",{type:"number",value:a,onChange:e=>{r(e.target.valueAsNumber)}})]})]})}function R(){let{setEditing:e,setDeleting:t,setMenuOpen:i,addWidget:n}=(0,l.useContext)(Q);return(0,s.jsx)("div",{className:"widget-list-VCLE3q",children:Object.entries(M).map((l,a)=>{let[r,o]=l,c=o.component;return(0,s.jsx)("div",{className:[j,"widget-thumb-DPPgFe"].join(" "),title:V(r),style:{minHeight:32*o.size.height*2+"px"},onClick:()=>{e(!0),t(!1),i(!1),n(r)},children:(0,s.jsx)(c,{...o})},a)})})}function q(){let{editing:e,widgets:t,setWidgets:i,saveTemplate:n}=(0,l.useContext)(Q);return(0,s.jsx)(s.Fragment,{children:t.map((a,r)=>{if(0!==Object.keys(a.settings).length)return(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)("span",{children:a.type.replace(/^./,e=>e.toUpperCase())}),Object.entries(a.settings).map((l,r)=>{let[o,c]=l;return(0,s.jsx)(B,{name:V(o),initialValue:c,onChange:s=>{a.settings[o]=s,i([...t]),e||n()}},r)})]},r)})})}function H(){let{templates:e,activeTemplate:t,saveTemplate:i,loadTemplate:n}=(0,l.useContext)(Q),[a,r]=(0,l.useState)(null);return(0,s.jsxs)(s.Fragment,{children:[e.map((e,i)=>{let l=i===t,o=i===a;return(0,s.jsxs)("div",{className:[j,"template-item-E0ecDD",l?_:""].join(" "),onClick:()=>{console.log(`Loading template ${e.name}`),n(i)},children:[(0,s.jsxs)("div",{className:[o?j:"","template-header-EkTosM"].join(" "),children:[(0,s.jsx)("span",{className:J,children:e.name||"Untitled"}),(0,s.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,s.jsx)("button",{className:[j,f].join(" "),onClick:e=>{e.stopPropagation(),o?r(null):r(i)},children:(0,s.jsx)(X.b,{size:14,weight:"bold"})}),(0,s.jsx)("button",{className:[j,f].join(" "),children:(0,s.jsx)(S.u,{size:14,weight:"bold"})})]})]}),o&&(0,s.jsx)("img",{src:e.image,style:{zoom:.5}})]},i)}),(0,s.jsx)("button",{className:[j,f,"save-button-qxCCTR"].join(" "),onClick:()=>{i("New Template")},children:"Save Template"})]})}var U=((n=U||{})[n.Widget=0]="Widget",n[n.Add=1]="Add",n[n.General=2]="General",n[n.Theme=3]="Theme",n[n.Template=4]="Template",n);function $(e){let{active:t}=e;(0,l.useContext)(Q);let[i,n]=(0,l.useState)(0);return(0,s.jsxs)("div",{className:[j,"menu-pgRRus",t?_:""].join(" "),children:[(0,s.jsx)("div",{className:[j,"header-dN2mY7"].join(" "),children:Object.entries(U).filter(e=>{let[t,i]=e;return isNaN(Number(t))}).map((e,t)=>{let[l,a]=e;return(0,s.jsx)("button",{className:["header-tab-wZUMs_",i===a?_:""].join(" "),onClick:()=>n(a),children:l},t)})}),0===i&&(0,s.jsx)(q,{}),1===i&&t&&(0,s.jsx)(R,{}),4===i&&(0,s.jsx)(H,{}),![0,1,4].includes(i)&&(0,s.jsx)("span",{children:"No Settings Available"})]})}function V(e){return e.replace(/([A-Z])/g,e=>` ${e}`).replace(/([A-Za-z])(?=\d)/g,"$1 ").replace(/^./,e=>e.toUpperCase()).trim()}var W=i(562),G=i(146);let Q=(0,l.createContext)(null),F=[{id:(0,W.Ak)(6),type:"clock",size:{...M.clock.size},position:{gridX:10,gridY:1},settings:{...M.clock.settings}},{id:(0,W.Ak)(6),type:"search",size:{...M.search.size},position:{gridX:8,gridY:3},settings:{...M.search.settings}}];a.createRoot(document.getElementById("root")).render((0,s.jsxs)(l.StrictMode,{children:[(0,s.jsx)("title",{children:"New Tab"}),(0,s.jsx)("meta",{name:"darkreader-lock"}),(0,s.jsx)(()=>{let[e,t]=(0,l.useState)(!1),[i,n]=(0,l.useState)(!1),[a,r]=(0,l.useState)(!1),[o,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)([]),[h,g]=(0,l.useState)([]),[x,j]=(0,l.useState)(0),f=(0,l.useRef)(null);async function v(e){var t;let i={name:e??(null==(t=h[x])?void 0:t.name)??"Default",image:await (0,G.$E)(f.current,{canvasWidth:240,canvasHeight:135}),widgets:structuredClone(d)};if(null==e){let e=[...h];e[x]=i,g([...e])}else g([...h,i]),j(h.length);localStorage.setItem("templates",JSON.stringify(h)),localStorage.setItem("activeTemplate",JSON.stringify(x))}return(0,l.useEffect)(()=>{let e,t;e=JSON.parse(localStorage.getItem("templates"))??[],t=JSON.parse(localStorage.getItem("activeTemplate"))??0,0===e.length&&e.push({name:"Default",image:null,widgets:structuredClone(F)}),g(e),j(t),u(e[t].widgets)},[]),(0,s.jsx)("div",{className:"content-JycvDH",onClick:e=>{e.target===e.currentTarget&&c(!1)},children:(0,s.jsxs)(Q.Provider,{value:{widgets:d,templates:h,activeTemplate:x,editing:e,deleting:i,hidden:a,menuOpen:o,setWidgets:u,setTemplates:g,setEditing:t,setDeleting:n,setHidden:r,setMenuOpen:c,saveTemplate:v,loadTemplate:function(e){let t=e??x;t>=h.length||(u(h[t].widgets),j(t),localStorage.setItem("activeTemplate",JSON.stringify(t)))},addWidget:function(e){if(!Object.keys(M).includes(e))return void console.error("Invalid widget type");let t={id:(0,W.Ak)(6),type:e,size:{...M[e].size},position:{gridX:0,gridY:0},settings:{...M[e].settings}};return u([...d,t]),t},removeWidget:function(e){u(d.filter(t=>t.id!==e))}},children:[(0,s.jsx)(P,{}),(0,s.jsx)(m,{width:24,height:12,ref:f,children:d.map(e=>{let t=M[e.type],i=t.component;return(0,s.jsx)(p,{size:e.size||t.size,position:e.position,resizeable:t.resizable,id:e.id,children:(0,s.jsx)(i,{...e})},e.id)})}),(0,s.jsx)($,{active:o})]})})},{})]}))}},l={};function a(e){var t=l[e];if(void 0!==t)return t.exports;var i=l[e]={exports:{}};return s[e].call(i.exports,i,i.exports,a),i.exports}a.m=s,a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],a.O=(t,i,n,s)=>{if(i){s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[i,n,s];return}for(var r=1/0,l=0;l<e.length;l++){for(var[i,n,s]=e[l],o=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(a.O).every(e=>a.O[e](i[c]))?i.splice(c--,1):(o=!1,s<r&&(r=s));if(o){e.splice(l--,1);var d=n();void 0!==d&&(t=d)}}return t},t={410:0},a.O.j=e=>0===t[e],i=(e,i)=>{var n,s,[l,r,o]=i,c=0;if(l.some(e=>0!==t[e])){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(o)var d=o(a)}for(e&&e(i);c<l.length;c++)s=l[c],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(d)},(n=self.webpackChunknewtabplus=self.webpackChunknewtabplus||[]).forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n));var r=a.O(void 0,["783","391"],function(){return a(931)});r=a.O(r)})();